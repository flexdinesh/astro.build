---
import { Image } from '@astrojs/image/components'
import { getAuthor } from '../data/authors'
import { Image as ImageType } from '../types'

type Props = {
    name?: string
    image?: ImageType
}

let { name, image } = Astro.props

if (!image && name) {
    const author = getAuthor(name)
    if (author instanceof Error) throw author
    image = author.image
}
---

{
    image && (
        <Image
            class="my-0 w-6 h-6 rounded-full"
            src={typeof image === 'string' ? image : image.src}
            alt=""
            aria-hidden="true"
            width={48}
            aspectRatio={1}
        />
    )
}
